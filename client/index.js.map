{"version":3,"sources":["webpack://LIB/webpack/bootstrap","webpack://LIB//Users/dimitriaatos/Documents/WebDev/syncwatch-server/node_modules/@dimitriaatos/syncwatch/src/index.js","webpack://LIB//Users/dimitriaatos/Documents/WebDev/syncwatch-server/node_modules/reconnectingwebsocket/reconnecting-websocket.js","webpack://LIB//Users/dimitriaatos/Documents/WebDev/syncwatch-server/node_modules/timesync/dist/timesync.js","webpack://LIB//Users/dimitriaatos/Documents/WebDev/syncwatch-server/node_modules/events/events.js","webpack://LIB//Users/dimitriaatos/Documents/WebDev/syncwatch-server/node_modules/@dimitriaatos/syncwatch/src/formatTime.js","webpack://LIB/(webpack)/buildin/global.js","webpack://LIB/./clientWatch.js","webpack://LIB/./index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","formatTime","cb","options","this","_playing","startTime","stopTime","format","maxTime","updateInterval","_callback","_steps","offset","callback","assign","playing","Date","now","ms","newState","rest","output","state","clearInterval","setInterval","updateTime","undefined","Math","round","min","max","toggle","reset","window","ReconnectingWebSocket","onopen","event","onclose","onconnecting","onmessage","onerror","debugAll","CONNECTING","WebSocket","OPEN","CLOSING","CLOSED","url","protocols","settings","debug","automaticOpen","reconnectInterval","maxReconnectInterval","reconnectDecay","timeoutInterval","maxReconnectAttempts","reconnectAttempts","readyState","protocol","ws","self","forcedClose","timedOut","eventTarget","document","createElement","generateEvent","args","evt","createEvent","initCustomEvent","addEventListener","removeEventListener","dispatchEvent","open","reconnectAttempt","console","localWs","timeout","setTimeout","close","clearTimeout","e","isReconnect","code","reason","wasClean","pow","data","send","refresh","f","u","a","Error","length","1","require","rawAsap","freeTasks","pendingErrors","requestErrorThrow","makeRequestCallFromTimer","shift","asap","task","rawTask","pop","RawTask","error","push","2","queue","requestFlush","index","flush","currentIndex","scan","newLength","observer","node","scope","global","BrowserMutationObserver","MutationObserver","WebKitMutationObserver","timeoutHandle","handleTimer","intervalHandle","createTextNode","observe","characterData","3","4","noop","LAST_ERROR","IS_ERROR","Promise","fn","TypeError","_75","_83","_18","_38","doResolve","handle","deferred","_47","onFulfilled","onRejected","ret","ex","tryCallOne","reject","promise","resolve","handleResolved","newValue","then","obj","getThen","finale","_71","Handler","done","res","b","tryCallTwo","_44","constructor","safeThen","5","arguments","apply","err","6","TRUE","valuePromise","FALSE","NULL","UNDEFINED","ZERO","EMPTYSTRING","all","arr","Array","slice","remaining","val","race","values","forEach","7","8","9","denodeify","argumentCount","Infinity","body","join","concat","callbackFn","Function","denodeifyWithCount","fnLength","map","_","denodeifyWithoutCount","nodeify","ctx","10","enableSynchronous","isPending","getState","isFulfilled","isRejected","getValue","getReason","disableSynchronous","11","12","default","_callbacks","emit","callbacks","on","off","indexOf","splice","list","13","fetch","method","headers","xhr","XMLHttpRequest","onreadystatechange","contentType","getResponseHeader","response","JSON","parse","responseText","status","setRequestHeader","ontimeout","stringify","post","14","isBrowser","15","urlObj","parseUrl","host","hostname","port","path","req","_https2","_http2","request","setEncoding","result","isJSON","statusCode","socket","abort","write","end","_interopRequireDefault","16","compare","add","sum","reduce","mean","variance","_mean","x","std","sqrt","median","sorted","sort","17","timesync","interval","delay","repeat","peers","server","_timeout","_inProgress","_isFirst","to","receive","catch","emitError","from","id","jsonrpc","_handleRPCSendError","rpc","params","util","nextId","rej","sendResult","warn","sync","peer","_syncWithPeer","offsets","filter","_validOffset","stat","isNaN","isFinite","_getOffset","waitAndSync","wait","notDone","whilst","results","roundtrips","roundtrip","limit","start","timestamp","destroy","prop","split","trim","log","_emitter2","_interopRequireWildcard","_emitter","newObj","18","times","count","recurse","condition","_id","ReflectOwnKeys","R","Reflect","ReflectApply","target","receiver","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","NumberIsNaN","Number","EventEmitter","init","_events","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","_getMaxListeners","that","_addListener","type","prepend","events","existing","warning","newListener","unshift","warned","w","String","emitter","onceWrapper","fired","removeListener","wrapFn","_onceWrap","wrapped","_listeners","unwrap","evlistener","unwrapListeners","arrayClone","listenerCount","copy","set","arg","RangeError","getPrototypeOf","setMaxListeners","getMaxListeners","doError","er","message","context","handler","len","listeners","addListener","prependListener","once","prependOnceListener","position","originalListener","spliceOne","removeAllListeners","keys","rawListeners","eventNames","calcs","entries","h","accum","divider","modulo","time","replace","RegExp","pTime","pFormat","numDigits","charAt","floor","formatDigits","abs","small","search","div","precision","smallest","g","super","syncWatch","syncPath","stopAfter","ts","reconnectAttemptInterval","location","maxSocket","update","onbeforeunload","clientWatchWebSocket"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","const formatTime = require('./formatTime')\n\n/**\n * A stopwatch class.\n * \n * @example import Syncwatch from 'syncwatch'\n * const watch = new Syncwatch(watch => console.log(watch.formatted), {format: 'hh/mm/ss'})\n * watch.start()\n */\n\nconst Syncwatch = class {\n  \n\t/**\n   * @param {func} cb - A callback function to be triggered repetitively when the time changes.\n   * @param {object} options - Initialize any property.\n   */\n\tconstructor(cb, options = {}) {\n\n\t\t/* This property holds the playing state (on/off) of the stopwatch */\n\t\tthis._playing = false\n\n\t\t/** The starting time of the syncwatch (default: 0). */\n\t\tthis.startTime = 0\n\n\t\t/** The stopping time, where the time is calculated from when the syncwatch is paused (default: 0). */\n\t\tthis.stopTime = 0\n\n\t\t/** The format to use to generate the formatted time (default: hh:mm:ss.d0). */\n\t\tthis.format = 'hh:mm:ss.d0'\n\n\t\t/** The maximum time (default: 359999999), when the syncwatch exceeds it will go back to 0. */\n\t\tthis.maxTime = 100 * 60 * 60 * 1000 - 1\n\n\t\t/** The interval between the invocations of the callback function */\n\t\tthis.updateInterval = 50\n\n\t\t/* The callback function to be called when the time changes */\n\t\tthis._callback = () => {}\n\n\t\t/* This property will hold the ID value returned by the setInterval() that will trigger the time changes */\n\t\tthis._steps\n\n\t\t/* A time offset */\n\t\tthis.offset = 0\n\n\t\t// Overwriting default values with the options given to the constructor.\n\t\tthis.callback(cb)\n\t\tObject.assign(this, options)\n\t\t// this.update(options)\n\t\t\n\t}\n  \n\t/** The current time in ms. */\n\tget ms() {\n\t\treturn (this.playing ? Date.now() + this.offset : this.stopTime) - this.startTime\n\t}\n  \n\t/** The current time in the specified form. */\n\tget formatted() {return formatTime(this.ms, this.format)}\n\n\t/**\n   * Update the state of the syncwatch.\n   * @param {object} newState - A new state.\n   */\n\tupdate(newState) {\n\t\tconst {playing, ...rest} = newState\n\t\tObject.assign(this, rest)\n\t\tif (typeof playing != 'undefined') {\n\t\t\tthis._playing != playing ?\n\t\t\t\tthis.playing = playing :\n\t\t\t\tthis._callback(this)\n\t\t}\n\t\treturn this.output()\n\t}\n\n\t/**\n   * Passing a callback function.\n   * @param {function} cb - A callback function to be triggered repetitively when the time changes.\n   */\n\tcallback(cb) {\n\t\tthis._callback = (t) => {\n\t\t\tcb && cb(t)\n\t\t}\n\t}\n\n\t/**\n   * Getting the state of the syncwatch.\n   * @return {object} state.\n   */\n\toutput() {\n\t\treturn (({playing, startTime, stopTime, format, updateInterval, maxTime}) => ({playing, startTime, stopTime, format, updateInterval, maxTime}))(this)\n\t}\n\n\t/**\n   * A property setter/getter for the syncwatch's playing state, this is useful for toggling syncwatch without triggering a function, when getting an external state.\n   */\n\tget playing() {\n\t\treturn this._playing\n\t}\n  \n\tset playing(state) {\n\t\tif (this._playing != state) {\n\t\t\tthis._playing = state != 0\n\t\t\tif (this._playing) {\n\t\t\t\tclearInterval(this._steps)\n\t\t\t\tthis._steps = setInterval(() => {\n\t\t\t\t\tthis._callback(this)\n\t\t\t\t}, this.updateTime)\n\t\t\t} else  {\n\t\t\t\tclearInterval(this._steps)\n\t\t\t}\n\t\t\tthis._callback(this)\n\t\t\treturn this._playing\n\t\t}\n\t}\n\n\t/**\n   * An on/off toggle for the syncwatch.\n   * @param {bool} playing state\n   */\n\ttoggle(state = !this.playing) {\n\t\tconst now = Date.now()\n\t\tif (state == !this.playing) {\n\t\t\tif (state) {\n\t\t\t\tthis.startTime = now - (this.stopTime - this.startTime)\n\t\t\t\tthis.stopTime = undefined\n\t\t\t} else {\n\t\t\t\tthis.stopTime = now\n\t\t\t}\n\t\t}\n\t\tthis.playing = state != 0\n\t\treturn this.output()\n\t}\n\n\t/**\n   * Resetting the time of the syncwatch.\n   * @param {number} ms - New time.\n   */\n\treset(ms = 0) {\n\t\tms = Math.round(Math.min(Math.max(ms, -this.maxTime), this.maxTime))\n\t\tthis.stopTime = Date.now()\n\t\tthis.startTime = this.stopTime - ms\n\n\t\tthis._callback(this)\n\t\treturn this.output()\n\t}\n\n\t/**\n   * Launching the syncwatch.\n   * @return {object} state.\n   */\n\tplay() {\n\t\treturn this.toggle(true)\n\t}\n\n\t/**\n   * Launching the syncwatch. An alias of play().\n   * @return {object} state.\n   */\n\tstart() {\n\t\treturn this.toggle(true)\n\t}\n\n\t/**\n   * Pausing the syncwatch.\n   * @return {object} state.\n   */\n\tpause() {\n\t\treturn this.toggle(false)\n\t}\n\n\t/**\n   * Stopping the syncwatch (goes back to 0).\n   * @return {object} state.\n   */\n\tstop() {\n\t\tthis.toggle(false)\n\t\treturn this.reset()\n\t}\n  \n}\n\nmodule.exports = Syncwatch","// MIT License:\n//\n// Copyright (c) 2010-2012, Joe Walnes\n//\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n//\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\n\n/**\n * This behaves like a WebSocket in every way, except if it fails to connect,\n * or it gets disconnected, it will repeatedly poll until it successfully connects\n * again.\n *\n * It is API compatible, so when you have:\n *   ws = new WebSocket('ws://....');\n * you can replace with:\n *   ws = new ReconnectingWebSocket('ws://....');\n *\n * The event stream will typically look like:\n *  onconnecting\n *  onopen\n *  onmessage\n *  onmessage\n *  onclose // lost connection\n *  onconnecting\n *  onopen  // sometime later...\n *  onmessage\n *  onmessage\n *  etc...\n *\n * It is API compatible with the standard WebSocket API, apart from the following members:\n *\n * - `bufferedAmount`\n * - `extensions`\n * - `binaryType`\n *\n * Latest version: https://github.com/joewalnes/reconnecting-websocket/\n * - Joe Walnes\n *\n * Syntax\n * ======\n * var socket = new ReconnectingWebSocket(url, protocols, options);\n *\n * Parameters\n * ==========\n * url - The url you are connecting to.\n * protocols - Optional string or array of protocols.\n * options - See below\n *\n * Options\n * =======\n * Options can either be passed upon instantiation or set after instantiation:\n *\n * var socket = new ReconnectingWebSocket(url, null, { debug: true, reconnectInterval: 4000 });\n *\n * or\n *\n * var socket = new ReconnectingWebSocket(url);\n * socket.debug = true;\n * socket.reconnectInterval = 4000;\n *\n * debug\n * - Whether this instance should log debug messages. Accepts true or false. Default: false.\n *\n * automaticOpen\n * - Whether or not the websocket should attempt to connect immediately upon instantiation. The socket can be manually opened or closed at any time using ws.open() and ws.close().\n *\n * reconnectInterval\n * - The number of milliseconds to delay before attempting to reconnect. Accepts integer. Default: 1000.\n *\n * maxReconnectInterval\n * - The maximum number of milliseconds to delay a reconnection attempt. Accepts integer. Default: 30000.\n *\n * reconnectDecay\n * - The rate of increase of the reconnect delay. Allows reconnect attempts to back off when problems persist. Accepts integer or float. Default: 1.5.\n *\n * timeoutInterval\n * - The maximum time in milliseconds to wait for a connection to succeed before closing and retrying. Accepts integer. Default: 2000.\n *\n */\n(function (global, factory) {\n    if (typeof define === 'function' && define.amd) {\n        define([], factory);\n    } else if (typeof module !== 'undefined' && module.exports){\n        module.exports = factory();\n    } else {\n        global.ReconnectingWebSocket = factory();\n    }\n})(this, function () {\n\n    if (!('WebSocket' in window)) {\n        return;\n    }\n\n    function ReconnectingWebSocket(url, protocols, options) {\n\n        // Default settings\n        var settings = {\n\n            /** Whether this instance should log debug messages. */\n            debug: false,\n\n            /** Whether or not the websocket should attempt to connect immediately upon instantiation. */\n            automaticOpen: true,\n\n            /** The number of milliseconds to delay before attempting to reconnect. */\n            reconnectInterval: 1000,\n            /** The maximum number of milliseconds to delay a reconnection attempt. */\n            maxReconnectInterval: 30000,\n            /** The rate of increase of the reconnect delay. Allows reconnect attempts to back off when problems persist. */\n            reconnectDecay: 1.5,\n\n            /** The maximum time in milliseconds to wait for a connection to succeed before closing and retrying. */\n            timeoutInterval: 2000,\n\n            /** The maximum number of reconnection attempts to make. Unlimited if null. */\n            maxReconnectAttempts: null\n        }\n        if (!options) { options = {}; }\n\n        // Overwrite and define settings with options if they exist.\n        for (var key in settings) {\n            if (typeof options[key] !== 'undefined') {\n                this[key] = options[key];\n            } else {\n                this[key] = settings[key];\n            }\n        }\n\n        // These should be treated as read-only properties\n\n        /** The URL as resolved by the constructor. This is always an absolute URL. Read only. */\n        this.url = url;\n\n        /** The number of attempted reconnects since starting, or the last successful connection. Read only. */\n        this.reconnectAttempts = 0;\n\n        /**\n         * The current state of the connection.\n         * Can be one of: WebSocket.CONNECTING, WebSocket.OPEN, WebSocket.CLOSING, WebSocket.CLOSED\n         * Read only.\n         */\n        this.readyState = WebSocket.CONNECTING;\n\n        /**\n         * A string indicating the name of the sub-protocol the server selected; this will be one of\n         * the strings specified in the protocols parameter when creating the WebSocket object.\n         * Read only.\n         */\n        this.protocol = null;\n\n        // Private state variables\n\n        var self = this;\n        var ws;\n        var forcedClose = false;\n        var timedOut = false;\n        var eventTarget = document.createElement('div');\n\n        // Wire up \"on*\" properties as event handlers\n\n        eventTarget.addEventListener('open',       function(event) { self.onopen(event); });\n        eventTarget.addEventListener('close',      function(event) { self.onclose(event); });\n        eventTarget.addEventListener('connecting', function(event) { self.onconnecting(event); });\n        eventTarget.addEventListener('message',    function(event) { self.onmessage(event); });\n        eventTarget.addEventListener('error',      function(event) { self.onerror(event); });\n\n        // Expose the API required by EventTarget\n\n        this.addEventListener = eventTarget.addEventListener.bind(eventTarget);\n        this.removeEventListener = eventTarget.removeEventListener.bind(eventTarget);\n        this.dispatchEvent = eventTarget.dispatchEvent.bind(eventTarget);\n\n        /**\n         * This function generates an event that is compatible with standard\n         * compliant browsers and IE9 - IE11\n         *\n         * This will prevent the error:\n         * Object doesn't support this action\n         *\n         * http://stackoverflow.com/questions/19345392/why-arent-my-parameters-getting-passed-through-to-a-dispatched-event/19345563#19345563\n         * @param s String The name that the event should use\n         * @param args Object an optional object that the event will use\n         */\n        function generateEvent(s, args) {\n        \tvar evt = document.createEvent(\"CustomEvent\");\n        \tevt.initCustomEvent(s, false, false, args);\n        \treturn evt;\n        };\n\n        this.open = function (reconnectAttempt) {\n            ws = new WebSocket(self.url, protocols || []);\n\n            if (reconnectAttempt) {\n                if (this.maxReconnectAttempts && this.reconnectAttempts > this.maxReconnectAttempts) {\n                    return;\n                }\n            } else {\n                eventTarget.dispatchEvent(generateEvent('connecting'));\n                this.reconnectAttempts = 0;\n            }\n\n            if (self.debug || ReconnectingWebSocket.debugAll) {\n                console.debug('ReconnectingWebSocket', 'attempt-connect', self.url);\n            }\n\n            var localWs = ws;\n            var timeout = setTimeout(function() {\n                if (self.debug || ReconnectingWebSocket.debugAll) {\n                    console.debug('ReconnectingWebSocket', 'connection-timeout', self.url);\n                }\n                timedOut = true;\n                localWs.close();\n                timedOut = false;\n            }, self.timeoutInterval);\n\n            ws.onopen = function(event) {\n                clearTimeout(timeout);\n                if (self.debug || ReconnectingWebSocket.debugAll) {\n                    console.debug('ReconnectingWebSocket', 'onopen', self.url);\n                }\n                self.protocol = ws.protocol;\n                self.readyState = WebSocket.OPEN;\n                self.reconnectAttempts = 0;\n                var e = generateEvent('open');\n                e.isReconnect = reconnectAttempt;\n                reconnectAttempt = false;\n                eventTarget.dispatchEvent(e);\n            };\n\n            ws.onclose = function(event) {\n                clearTimeout(timeout);\n                ws = null;\n                if (forcedClose) {\n                    self.readyState = WebSocket.CLOSED;\n                    eventTarget.dispatchEvent(generateEvent('close'));\n                } else {\n                    self.readyState = WebSocket.CONNECTING;\n                    var e = generateEvent('connecting');\n                    e.code = event.code;\n                    e.reason = event.reason;\n                    e.wasClean = event.wasClean;\n                    eventTarget.dispatchEvent(e);\n                    if (!reconnectAttempt && !timedOut) {\n                        if (self.debug || ReconnectingWebSocket.debugAll) {\n                            console.debug('ReconnectingWebSocket', 'onclose', self.url);\n                        }\n                        eventTarget.dispatchEvent(generateEvent('close'));\n                    }\n\n                    var timeout = self.reconnectInterval * Math.pow(self.reconnectDecay, self.reconnectAttempts);\n                    setTimeout(function() {\n                        self.reconnectAttempts++;\n                        self.open(true);\n                    }, timeout > self.maxReconnectInterval ? self.maxReconnectInterval : timeout);\n                }\n            };\n            ws.onmessage = function(event) {\n                if (self.debug || ReconnectingWebSocket.debugAll) {\n                    console.debug('ReconnectingWebSocket', 'onmessage', self.url, event.data);\n                }\n                var e = generateEvent('message');\n                e.data = event.data;\n                eventTarget.dispatchEvent(e);\n            };\n            ws.onerror = function(event) {\n                if (self.debug || ReconnectingWebSocket.debugAll) {\n                    console.debug('ReconnectingWebSocket', 'onerror', self.url, event);\n                }\n                eventTarget.dispatchEvent(generateEvent('error'));\n            };\n        }\n\n        // Whether or not to create a websocket upon instantiation\n        if (this.automaticOpen == true) {\n            this.open(false);\n        }\n\n        /**\n         * Transmits data to the server over the WebSocket connection.\n         *\n         * @param data a text string, ArrayBuffer or Blob to send to the server.\n         */\n        this.send = function(data) {\n            if (ws) {\n                if (self.debug || ReconnectingWebSocket.debugAll) {\n                    console.debug('ReconnectingWebSocket', 'send', self.url, data);\n                }\n                return ws.send(data);\n            } else {\n                throw 'INVALID_STATE_ERR : Pausing to reconnect websocket';\n            }\n        };\n\n        /**\n         * Closes the WebSocket connection or connection attempt, if any.\n         * If the connection is already CLOSED, this method does nothing.\n         */\n        this.close = function(code, reason) {\n            // Default CLOSE_NORMAL code\n            if (typeof code == 'undefined') {\n                code = 1000;\n            }\n            forcedClose = true;\n            if (ws) {\n                ws.close(code, reason);\n            }\n        };\n\n        /**\n         * Additional public API method to refresh the connection if still open (close, re-open).\n         * For example, if the app suspects bad data / missed heart beats, it can try to refresh.\n         */\n        this.refresh = function() {\n            if (ws) {\n                ws.close();\n            }\n        };\n    }\n\n    /**\n     * An event listener to be called when the WebSocket connection's readyState changes to OPEN;\n     * this indicates that the connection is ready to send and receive data.\n     */\n    ReconnectingWebSocket.prototype.onopen = function(event) {};\n    /** An event listener to be called when the WebSocket connection's readyState changes to CLOSED. */\n    ReconnectingWebSocket.prototype.onclose = function(event) {};\n    /** An event listener to be called when a connection begins being attempted. */\n    ReconnectingWebSocket.prototype.onconnecting = function(event) {};\n    /** An event listener to be called when a message is received from the server. */\n    ReconnectingWebSocket.prototype.onmessage = function(event) {};\n    /** An event listener to be called when an error occurs. */\n    ReconnectingWebSocket.prototype.onerror = function(event) {};\n\n    /**\n     * Whether all instances of ReconnectingWebSocket should log debug messages.\n     * Setting this to true is the equivalent of setting all instances of ReconnectingWebSocket.debug to true.\n     */\n    ReconnectingWebSocket.debugAll = false;\n\n    ReconnectingWebSocket.CONNECTING = WebSocket.CONNECTING;\n    ReconnectingWebSocket.OPEN = WebSocket.OPEN;\n    ReconnectingWebSocket.CLOSING = WebSocket.CLOSING;\n    ReconnectingWebSocket.CLOSED = WebSocket.CLOSED;\n\n    return ReconnectingWebSocket;\n});\n","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.timesync = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\n\n// rawAsap provides everything we need except exception management.\nvar rawAsap = require(\"./raw\");\n// RawTasks are recycled to reduce GC churn.\nvar freeTasks = [];\n// We queue errors to ensure they are thrown in right order (FIFO).\n// Array-as-queue is good enough here, since we are just dealing with exceptions.\nvar pendingErrors = [];\nvar requestErrorThrow = rawAsap.makeRequestCallFromTimer(throwFirstError);\n\nfunction throwFirstError() {\n    if (pendingErrors.length) {\n        throw pendingErrors.shift();\n    }\n}\n\n/**\n * Calls a task as soon as possible after returning, in its own event, with priority\n * over other events like animation, reflow, and repaint. An error thrown from an\n * event will not interrupt, nor even substantially slow down the processing of\n * other events, but will be rather postponed to a lower priority event.\n * @param {{call}} task A callable object, typically a function that takes no\n * arguments.\n */\nmodule.exports = asap;\nfunction asap(task) {\n    var rawTask;\n    if (freeTasks.length) {\n        rawTask = freeTasks.pop();\n    } else {\n        rawTask = new RawTask();\n    }\n    rawTask.task = task;\n    rawAsap(rawTask);\n}\n\n// We wrap tasks with recyclable task objects.  A task object implements\n// `call`, just like a function.\nfunction RawTask() {\n    this.task = null;\n}\n\n// The sole purpose of wrapping the task is to catch the exception and recycle\n// the task object after its single use.\nRawTask.prototype.call = function () {\n    try {\n        this.task.call();\n    } catch (error) {\n        if (asap.onerror) {\n            // This hook exists purely for testing purposes.\n            // Its name will be periodically randomized to break any code that\n            // depends on its existence.\n            asap.onerror(error);\n        } else {\n            // In a web browser, exceptions are not fatal. However, to avoid\n            // slowing down the queue of pending tasks, we rethrow the error in a\n            // lower priority turn.\n            pendingErrors.push(error);\n            requestErrorThrow();\n        }\n    } finally {\n        this.task = null;\n        freeTasks[freeTasks.length] = this;\n    }\n};\n\n},{\"./raw\":2}],2:[function(require,module,exports){\n\"use strict\";\n\n// Use the fastest means possible to execute a task in its own turn, with\n// priority over other events including IO, animation, reflow, and redraw\n// events in browsers.\n//\n// An exception thrown by a task will permanently interrupt the processing of\n// subsequent tasks. The higher level `asap` function ensures that if an\n// exception is thrown by a task, that the task queue will continue flushing as\n// soon as possible, but if you use `rawAsap` directly, you are responsible to\n// either ensure that no exceptions are thrown from your task, or to manually\n// call `rawAsap.requestFlush` if an exception is thrown.\nmodule.exports = rawAsap;\nfunction rawAsap(task) {\n    if (!queue.length) {\n        requestFlush();\n        flushing = true;\n    }\n    // Equivalent to push, but avoids a function call.\n    queue[queue.length] = task;\n}\n\nvar queue = [];\n// Once a flush has been requested, no further calls to `requestFlush` are\n// necessary until the next `flush` completes.\nvar flushing = false;\n// `requestFlush` is an implementation-specific method that attempts to kick\n// off a `flush` event as quickly as possible. `flush` will attempt to exhaust\n// the event queue before yielding to the browser's own event loop.\nvar requestFlush;\n// The position of the next task to execute in the task queue. This is\n// preserved between calls to `flush` so that it can be resumed if\n// a task throws an exception.\nvar index = 0;\n// If a task schedules additional tasks recursively, the task queue can grow\n// unbounded. To prevent memory exhaustion, the task queue will periodically\n// truncate already-completed tasks.\nvar capacity = 1024;\n\n// The flush function processes all tasks that have been scheduled with\n// `rawAsap` unless and until one of those tasks throws an exception.\n// If a task throws an exception, `flush` ensures that its state will remain\n// consistent and will resume where it left off when called again.\n// However, `flush` does not make any arrangements to be called again if an\n// exception is thrown.\nfunction flush() {\n    while (index < queue.length) {\n        var currentIndex = index;\n        // Advance the index before calling the task. This ensures that we will\n        // begin flushing on the next task the task throws an error.\n        index = index + 1;\n        queue[currentIndex].call();\n        // Prevent leaking memory for long chains of recursive calls to `asap`.\n        // If we call `asap` within tasks scheduled by `asap`, the queue will\n        // grow, but to avoid an O(n) walk for every task we execute, we don't\n        // shift tasks off the queue after they have been executed.\n        // Instead, we periodically shift 1024 tasks off the queue.\n        if (index > capacity) {\n            // Manually shift all values starting at the index back to the\n            // beginning of the queue.\n            for (var scan = 0, newLength = queue.length - index; scan < newLength; scan++) {\n                queue[scan] = queue[scan + index];\n            }\n            queue.length -= index;\n            index = 0;\n        }\n    }\n    queue.length = 0;\n    index = 0;\n    flushing = false;\n}\n\n// `requestFlush` is implemented using a strategy based on data collected from\n// every available SauceLabs Selenium web driver worker at time of writing.\n// https://docs.google.com/spreadsheets/d/1mG-5UYGup5qxGdEMWkhP6BWCz053NUb2E1QoUTU16uA/edit#gid=783724593\n\n// Safari 6 and 6.1 for desktop, iPad, and iPhone are the only browsers that\n// have WebKitMutationObserver but not un-prefixed MutationObserver.\n// Must use `global` or `self` instead of `window` to work in both frames and web\n// workers. `global` is a provision of Browserify, Mr, Mrs, or Mop.\n\n/* globals self */\nvar scope = typeof global !== \"undefined\" ? global : self;\nvar BrowserMutationObserver = scope.MutationObserver || scope.WebKitMutationObserver;\n\n// MutationObservers are desirable because they have high priority and work\n// reliably everywhere they are implemented.\n// They are implemented in all modern browsers.\n//\n// - Android 4-4.3\n// - Chrome 26-34\n// - Firefox 14-29\n// - Internet Explorer 11\n// - iPad Safari 6-7.1\n// - iPhone Safari 7-7.1\n// - Safari 6-7\nif (typeof BrowserMutationObserver === \"function\") {\n    requestFlush = makeRequestCallFromMutationObserver(flush);\n\n// MessageChannels are desirable because they give direct access to the HTML\n// task queue, are implemented in Internet Explorer 10, Safari 5.0-1, and Opera\n// 11-12, and in web workers in many engines.\n// Although message channels yield to any queued rendering and IO tasks, they\n// would be better than imposing the 4ms delay of timers.\n// However, they do not work reliably in Internet Explorer or Safari.\n\n// Internet Explorer 10 is the only browser that has setImmediate but does\n// not have MutationObservers.\n// Although setImmediate yields to the browser's renderer, it would be\n// preferrable to falling back to setTimeout since it does not have\n// the minimum 4ms penalty.\n// Unfortunately there appears to be a bug in Internet Explorer 10 Mobile (and\n// Desktop to a lesser extent) that renders both setImmediate and\n// MessageChannel useless for the purposes of ASAP.\n// https://github.com/kriskowal/q/issues/396\n\n// Timers are implemented universally.\n// We fall back to timers in workers in most engines, and in foreground\n// contexts in the following browsers.\n// However, note that even this simple case requires nuances to operate in a\n// broad spectrum of browsers.\n//\n// - Firefox 3-13\n// - Internet Explorer 6-9\n// - iPad Safari 4.3\n// - Lynx 2.8.7\n} else {\n    requestFlush = makeRequestCallFromTimer(flush);\n}\n\n// `requestFlush` requests that the high priority event queue be flushed as\n// soon as possible.\n// This is useful to prevent an error thrown in a task from stalling the event\n// queue if the exception handled by Node.js’s\n// `process.on(\"uncaughtException\")` or by a domain.\nrawAsap.requestFlush = requestFlush;\n\n// To request a high priority event, we induce a mutation observer by toggling\n// the text of a text node between \"1\" and \"-1\".\nfunction makeRequestCallFromMutationObserver(callback) {\n    var toggle = 1;\n    var observer = new BrowserMutationObserver(callback);\n    var node = document.createTextNode(\"\");\n    observer.observe(node, {characterData: true});\n    return function requestCall() {\n        toggle = -toggle;\n        node.data = toggle;\n    };\n}\n\n// The message channel technique was discovered by Malte Ubl and was the\n// original foundation for this library.\n// http://www.nonblocking.io/2011/06/windownexttick.html\n\n// Safari 6.0.5 (at least) intermittently fails to create message ports on a\n// page's first load. Thankfully, this version of Safari supports\n// MutationObservers, so we don't need to fall back in that case.\n\n// function makeRequestCallFromMessageChannel(callback) {\n//     var channel = new MessageChannel();\n//     channel.port1.onmessage = callback;\n//     return function requestCall() {\n//         channel.port2.postMessage(0);\n//     };\n// }\n\n// For reasons explained above, we are also unable to use `setImmediate`\n// under any circumstances.\n// Even if we were, there is another bug in Internet Explorer 10.\n// It is not sufficient to assign `setImmediate` to `requestFlush` because\n// `setImmediate` must be called *by name* and therefore must be wrapped in a\n// closure.\n// Never forget.\n\n// function makeRequestCallFromSetImmediate(callback) {\n//     return function requestCall() {\n//         setImmediate(callback);\n//     };\n// }\n\n// Safari 6.0 has a problem where timers will get lost while the user is\n// scrolling. This problem does not impact ASAP because Safari 6.0 supports\n// mutation observers, so that implementation is used instead.\n// However, if we ever elect to use timers in Safari, the prevalent work-around\n// is to add a scroll event listener that calls for a flush.\n\n// `setTimeout` does not call the passed callback if the delay is less than\n// approximately 7 in web workers in Firefox 8 through 18, and sometimes not\n// even then.\n\nfunction makeRequestCallFromTimer(callback) {\n    return function requestCall() {\n        // We dispatch a timeout with a specified delay of 0 for engines that\n        // can reliably accommodate that request. This will usually be snapped\n        // to a 4 milisecond delay, but once we're flushing, there's no delay\n        // between events.\n        var timeoutHandle = setTimeout(handleTimer, 0);\n        // However, since this timer gets frequently dropped in Firefox\n        // workers, we enlist an interval handle that will try to fire\n        // an event 20 times per second until it succeeds.\n        var intervalHandle = setInterval(handleTimer, 50);\n\n        function handleTimer() {\n            // Whichever timer succeeds will cancel both timers and\n            // execute the callback.\n            clearTimeout(timeoutHandle);\n            clearInterval(intervalHandle);\n            callback();\n        }\n    };\n}\n\n// This is for `asap.js` only.\n// Its name will be periodically randomized to break any code that depends on\n// its existence.\nrawAsap.makeRequestCallFromTimer = makeRequestCallFromTimer;\n\n// ASAP was originally a nextTick shim included in Q. This was factored out\n// into this ASAP package. It was later adapted to RSVP which made further\n// amendments. These decisions, particularly to marginalize MessageChannel and\n// to capture the MutationObserver implementation in a closure, were integrated\n// back into ASAP proper.\n// https://github.com/tildeio/rsvp.js/blob/cddf7232546a9cf858524b75cde6f9edf72620a7/lib/rsvp/asap.js\n\n},{}],3:[function(require,module,exports){\n'use strict';\n\nmodule.exports = require('./lib')\n\n},{\"./lib\":8}],4:[function(require,module,exports){\n'use strict';\n\nvar asap = require('asap/raw');\n\nfunction noop() {}\n\n// States:\n//\n// 0 - pending\n// 1 - fulfilled with _value\n// 2 - rejected with _value\n// 3 - adopted the state of another promise, _value\n//\n// once the state is no longer pending (0) it is immutable\n\n// All `_` prefixed properties will be reduced to `_{random number}`\n// at build time to obfuscate them and discourage their use.\n// We don't use symbols or Object.defineProperty to fully hide them\n// because the performance isn't good enough.\n\n\n// to avoid using try/catch inside critical functions, we\n// extract them to here.\nvar LAST_ERROR = null;\nvar IS_ERROR = {};\nfunction getThen(obj) {\n  try {\n    return obj.then;\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\n\nfunction tryCallOne(fn, a) {\n  try {\n    return fn(a);\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\nfunction tryCallTwo(fn, a, b) {\n  try {\n    fn(a, b);\n  } catch (ex) {\n    LAST_ERROR = ex;\n    return IS_ERROR;\n  }\n}\n\nmodule.exports = Promise;\n\nfunction Promise(fn) {\n  if (typeof this !== 'object') {\n    throw new TypeError('Promises must be constructed via new');\n  }\n  if (typeof fn !== 'function') {\n    throw new TypeError('Promise constructor\\'s argument is not a function');\n  }\n  this._75 = 0;\n  this._83 = 0;\n  this._18 = null;\n  this._38 = null;\n  if (fn === noop) return;\n  doResolve(fn, this);\n}\nPromise._47 = null;\nPromise._71 = null;\nPromise._44 = noop;\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  if (this.constructor !== Promise) {\n    return safeThen(this, onFulfilled, onRejected);\n  }\n  var res = new Promise(noop);\n  handle(this, new Handler(onFulfilled, onRejected, res));\n  return res;\n};\n\nfunction safeThen(self, onFulfilled, onRejected) {\n  return new self.constructor(function (resolve, reject) {\n    var res = new Promise(noop);\n    res.then(resolve, reject);\n    handle(self, new Handler(onFulfilled, onRejected, res));\n  });\n}\nfunction handle(self, deferred) {\n  while (self._83 === 3) {\n    self = self._18;\n  }\n  if (Promise._47) {\n    Promise._47(self);\n  }\n  if (self._83 === 0) {\n    if (self._75 === 0) {\n      self._75 = 1;\n      self._38 = deferred;\n      return;\n    }\n    if (self._75 === 1) {\n      self._75 = 2;\n      self._38 = [self._38, deferred];\n      return;\n    }\n    self._38.push(deferred);\n    return;\n  }\n  handleResolved(self, deferred);\n}\n\nfunction handleResolved(self, deferred) {\n  asap(function() {\n    var cb = self._83 === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      if (self._83 === 1) {\n        resolve(deferred.promise, self._18);\n      } else {\n        reject(deferred.promise, self._18);\n      }\n      return;\n    }\n    var ret = tryCallOne(cb, self._18);\n    if (ret === IS_ERROR) {\n      reject(deferred.promise, LAST_ERROR);\n    } else {\n      resolve(deferred.promise, ret);\n    }\n  });\n}\nfunction resolve(self, newValue) {\n  // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n  if (newValue === self) {\n    return reject(\n      self,\n      new TypeError('A promise cannot be resolved with itself.')\n    );\n  }\n  if (\n    newValue &&\n    (typeof newValue === 'object' || typeof newValue === 'function')\n  ) {\n    var then = getThen(newValue);\n    if (then === IS_ERROR) {\n      return reject(self, LAST_ERROR);\n    }\n    if (\n      then === self.then &&\n      newValue instanceof Promise\n    ) {\n      self._83 = 3;\n      self._18 = newValue;\n      finale(self);\n      return;\n    } else if (typeof then === 'function') {\n      doResolve(then.bind(newValue), self);\n      return;\n    }\n  }\n  self._83 = 1;\n  self._18 = newValue;\n  finale(self);\n}\n\nfunction reject(self, newValue) {\n  self._83 = 2;\n  self._18 = newValue;\n  if (Promise._71) {\n    Promise._71(self, newValue);\n  }\n  finale(self);\n}\nfunction finale(self) {\n  if (self._75 === 1) {\n    handle(self, self._38);\n    self._38 = null;\n  }\n  if (self._75 === 2) {\n    for (var i = 0; i < self._38.length; i++) {\n      handle(self, self._38[i]);\n    }\n    self._38 = null;\n  }\n}\n\nfunction Handler(onFulfilled, onRejected, promise){\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, promise) {\n  var done = false;\n  var res = tryCallTwo(fn, function (value) {\n    if (done) return;\n    done = true;\n    resolve(promise, value);\n  }, function (reason) {\n    if (done) return;\n    done = true;\n    reject(promise, reason);\n  });\n  if (!done && res === IS_ERROR) {\n    done = true;\n    reject(promise, LAST_ERROR);\n  }\n}\n\n},{\"asap/raw\":2}],5:[function(require,module,exports){\n'use strict';\n\nvar Promise = require('./core.js');\n\nmodule.exports = Promise;\nPromise.prototype.done = function (onFulfilled, onRejected) {\n  var self = arguments.length ? this.then.apply(this, arguments) : this;\n  self.then(null, function (err) {\n    setTimeout(function () {\n      throw err;\n    }, 0);\n  });\n};\n\n},{\"./core.js\":4}],6:[function(require,module,exports){\n'use strict';\n\n//This file contains the ES6 extensions to the core Promises/A+ API\n\nvar Promise = require('./core.js');\n\nmodule.exports = Promise;\n\n/* Static Functions */\n\nvar TRUE = valuePromise(true);\nvar FALSE = valuePromise(false);\nvar NULL = valuePromise(null);\nvar UNDEFINED = valuePromise(undefined);\nvar ZERO = valuePromise(0);\nvar EMPTYSTRING = valuePromise('');\n\nfunction valuePromise(value) {\n  var p = new Promise(Promise._44);\n  p._83 = 1;\n  p._18 = value;\n  return p;\n}\nPromise.resolve = function (value) {\n  if (value instanceof Promise) return value;\n\n  if (value === null) return NULL;\n  if (value === undefined) return UNDEFINED;\n  if (value === true) return TRUE;\n  if (value === false) return FALSE;\n  if (value === 0) return ZERO;\n  if (value === '') return EMPTYSTRING;\n\n  if (typeof value === 'object' || typeof value === 'function') {\n    try {\n      var then = value.then;\n      if (typeof then === 'function') {\n        return new Promise(then.bind(value));\n      }\n    } catch (ex) {\n      return new Promise(function (resolve, reject) {\n        reject(ex);\n      });\n    }\n  }\n  return valuePromise(value);\n};\n\nPromise.all = function (arr) {\n  var args = Array.prototype.slice.call(arr);\n\n  return new Promise(function (resolve, reject) {\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n    function res(i, val) {\n      if (val && (typeof val === 'object' || typeof val === 'function')) {\n        if (val instanceof Promise && val.then === Promise.prototype.then) {\n          while (val._83 === 3) {\n            val = val._18;\n          }\n          if (val._83 === 1) return res(i, val._18);\n          if (val._83 === 2) reject(val._18);\n          val.then(function (val) {\n            res(i, val);\n          }, reject);\n          return;\n        } else {\n          var then = val.then;\n          if (typeof then === 'function') {\n            var p = new Promise(then.bind(val));\n            p.then(function (val) {\n              res(i, val);\n            }, reject);\n            return;\n          }\n        }\n      }\n      args[i] = val;\n      if (--remaining === 0) {\n        resolve(args);\n      }\n    }\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.reject = function (value) {\n  return new Promise(function (resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function (values) {\n  return new Promise(function (resolve, reject) {\n    values.forEach(function(value){\n      Promise.resolve(value).then(resolve, reject);\n    });\n  });\n};\n\n/* Prototype Methods */\n\nPromise.prototype['catch'] = function (onRejected) {\n  return this.then(null, onRejected);\n};\n\n},{\"./core.js\":4}],7:[function(require,module,exports){\n'use strict';\n\nvar Promise = require('./core.js');\n\nmodule.exports = Promise;\nPromise.prototype['finally'] = function (f) {\n  return this.then(function (value) {\n    return Promise.resolve(f()).then(function () {\n      return value;\n    });\n  }, function (err) {\n    return Promise.resolve(f()).then(function () {\n      throw err;\n    });\n  });\n};\n\n},{\"./core.js\":4}],8:[function(require,module,exports){\n'use strict';\n\nmodule.exports = require('./core.js');\nrequire('./done.js');\nrequire('./finally.js');\nrequire('./es6-extensions.js');\nrequire('./node-extensions.js');\nrequire('./synchronous.js');\n\n},{\"./core.js\":4,\"./done.js\":5,\"./es6-extensions.js\":6,\"./finally.js\":7,\"./node-extensions.js\":9,\"./synchronous.js\":10}],9:[function(require,module,exports){\n'use strict';\n\n// This file contains then/promise specific extensions that are only useful\n// for node.js interop\n\nvar Promise = require('./core.js');\nvar asap = require('asap');\n\nmodule.exports = Promise;\n\n/* Static Functions */\n\nPromise.denodeify = function (fn, argumentCount) {\n  if (\n    typeof argumentCount === 'number' && argumentCount !== Infinity\n  ) {\n    return denodeifyWithCount(fn, argumentCount);\n  } else {\n    return denodeifyWithoutCount(fn);\n  }\n};\n\nvar callbackFn = (\n  'function (err, res) {' +\n  'if (err) { rj(err); } else { rs(res); }' +\n  '}'\n);\nfunction denodeifyWithCount(fn, argumentCount) {\n  var args = [];\n  for (var i = 0; i < argumentCount; i++) {\n    args.push('a' + i);\n  }\n  var body = [\n    'return function (' + args.join(',') + ') {',\n    'var self = this;',\n    'return new Promise(function (rs, rj) {',\n    'var res = fn.call(',\n    ['self'].concat(args).concat([callbackFn]).join(','),\n    ');',\n    'if (res &&',\n    '(typeof res === \"object\" || typeof res === \"function\") &&',\n    'typeof res.then === \"function\"',\n    ') {rs(res);}',\n    '});',\n    '};'\n  ].join('');\n  return Function(['Promise', 'fn'], body)(Promise, fn);\n}\nfunction denodeifyWithoutCount(fn) {\n  var fnLength = Math.max(fn.length - 1, 3);\n  var args = [];\n  for (var i = 0; i < fnLength; i++) {\n    args.push('a' + i);\n  }\n  var body = [\n    'return function (' + args.join(',') + ') {',\n    'var self = this;',\n    'var args;',\n    'var argLength = arguments.length;',\n    'if (arguments.length > ' + fnLength + ') {',\n    'args = new Array(arguments.length + 1);',\n    'for (var i = 0; i < arguments.length; i++) {',\n    'args[i] = arguments[i];',\n    '}',\n    '}',\n    'return new Promise(function (rs, rj) {',\n    'var cb = ' + callbackFn + ';',\n    'var res;',\n    'switch (argLength) {',\n    args.concat(['extra']).map(function (_, index) {\n      return (\n        'case ' + (index) + ':' +\n        'res = fn.call(' + ['self'].concat(args.slice(0, index)).concat('cb').join(',') + ');' +\n        'break;'\n      );\n    }).join(''),\n    'default:',\n    'args[argLength] = cb;',\n    'res = fn.apply(self, args);',\n    '}',\n    \n    'if (res &&',\n    '(typeof res === \"object\" || typeof res === \"function\") &&',\n    'typeof res.then === \"function\"',\n    ') {rs(res);}',\n    '});',\n    '};'\n  ].join('');\n\n  return Function(\n    ['Promise', 'fn'],\n    body\n  )(Promise, fn);\n}\n\nPromise.nodeify = function (fn) {\n  return function () {\n    var args = Array.prototype.slice.call(arguments);\n    var callback =\n      typeof args[args.length - 1] === 'function' ? args.pop() : null;\n    var ctx = this;\n    try {\n      return fn.apply(this, arguments).nodeify(callback, ctx);\n    } catch (ex) {\n      if (callback === null || typeof callback == 'undefined') {\n        return new Promise(function (resolve, reject) {\n          reject(ex);\n        });\n      } else {\n        asap(function () {\n          callback.call(ctx, ex);\n        })\n      }\n    }\n  }\n};\n\nPromise.prototype.nodeify = function (callback, ctx) {\n  if (typeof callback != 'function') return this;\n\n  this.then(function (value) {\n    asap(function () {\n      callback.call(ctx, null, value);\n    });\n  }, function (err) {\n    asap(function () {\n      callback.call(ctx, err);\n    });\n  });\n};\n\n},{\"./core.js\":4,\"asap\":1}],10:[function(require,module,exports){\n'use strict';\n\nvar Promise = require('./core.js');\n\nmodule.exports = Promise;\nPromise.enableSynchronous = function () {\n  Promise.prototype.isPending = function() {\n    return this.getState() == 0;\n  };\n\n  Promise.prototype.isFulfilled = function() {\n    return this.getState() == 1;\n  };\n\n  Promise.prototype.isRejected = function() {\n    return this.getState() == 2;\n  };\n\n  Promise.prototype.getValue = function () {\n    if (this._83 === 3) {\n      return this._18.getValue();\n    }\n\n    if (!this.isFulfilled()) {\n      throw new Error('Cannot get a value of an unfulfilled promise.');\n    }\n\n    return this._18;\n  };\n\n  Promise.prototype.getReason = function () {\n    if (this._83 === 3) {\n      return this._18.getReason();\n    }\n\n    if (!this.isRejected()) {\n      throw new Error('Cannot get a rejection reason of a non-rejected promise.');\n    }\n\n    return this._18;\n  };\n\n  Promise.prototype.getState = function () {\n    if (this._83 === 3) {\n      return this._18.getState();\n    }\n    if (this._83 === -1 || this._83 === -2) {\n      return 0;\n    }\n\n    return this._83;\n  };\n};\n\nPromise.disableSynchronous = function() {\n  Promise.prototype.isPending = undefined;\n  Promise.prototype.isFulfilled = undefined;\n  Promise.prototype.isRejected = undefined;\n  Promise.prototype.getValue = undefined;\n  Promise.prototype.getReason = undefined;\n  Promise.prototype.getState = undefined;\n};\n\n},{\"./core.js\":4}],11:[function(require,module,exports){\n'use strict';\n\nmodule.exports = typeof window === 'undefined' || typeof window.Promise === 'undefined' ? require('promise') : window.Promise;\n\n},{\"promise\":3}],12:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = emitter;\n/**\n * Turn an object into an event emitter. Attaches methods `on`, `off`,\n * `emit`, and `list`\n * @param {Object} obj\n * @return {Object} Returns the original object, extended with emitter functions\n */\nfunction emitter(obj) {\n  var _callbacks = {};\n\n  obj.emit = function (event, data) {\n    var callbacks = _callbacks[event];\n    callbacks && callbacks.forEach(function (callback) {\n      return callback(data);\n    });\n  };\n\n  obj.on = function (event, callback) {\n    var callbacks = _callbacks[event] || (_callbacks[event] = []);\n    callbacks.push(callback);\n    return obj;\n  };\n\n  obj.off = function (event, callback) {\n    if (callback) {\n      var callbacks = _callbacks[event];\n      var index = callbacks.indexOf(callback);\n      if (index !== -1) {\n        callbacks.splice(index, 1);\n      }\n      if (callbacks.length === 0) {\n        delete _callbacks[event];\n      }\n    } else {\n      delete _callbacks[event];\n    }\n    return obj;\n  };\n\n  obj.list = function (event) {\n    return _callbacks[event] || [];\n  };\n\n  return obj;\n}\n\n},{}],13:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.fetch = fetch;\nexports.post = post;\nfunction fetch(method, url, body, headers, callback, timeout) {\n  try {\n    var xhr = new XMLHttpRequest();\n    xhr.onreadystatechange = function () {\n      if (xhr.readyState == 4) {\n        var contentType = xhr.getResponseHeader('Content-Type');\n        if (contentType && contentType.indexOf('json') !== -1) {\n          try {\n            // return JSON object\n            var response = JSON.parse(xhr.responseText);\n            callback(null, response, xhr.status);\n          } catch (err) {\n            callback(err, null, xhr.status);\n          }\n        } else {\n          // return text\n          callback(null, xhr.responseText, xhr.status);\n        }\n      }\n    };\n    if (headers) {\n      for (var name in headers) {\n        if (headers.hasOwnProperty(name)) {\n          xhr.setRequestHeader(name, headers[name]);\n        }\n      }\n    }\n\n    xhr.ontimeout = function (err) {\n      callback(err, null, 0);\n    };\n\n    xhr.open(method, url, true);\n    xhr.timeout = timeout;\n\n    if (typeof body === 'string') {\n      xhr.send(body);\n    } else if (body) {\n      // body is an object\n      xhr.setRequestHeader('Content-Type', 'application/json');\n      xhr.send(JSON.stringify(body));\n    } else {\n      xhr.send();\n    }\n  } catch (err) {\n    callback(err, null, 0);\n  }\n}\n\nfunction post(url, body, timeout) {\n  return new Promise(function (resolve, reject) {\n    var callback = function callback(err, res, status) {\n      if (err) {\n        return reject(err);\n      }\n\n      resolve([res, status]);\n    };\n\n    fetch('POST', url, body, null, callback, timeout);\n  });\n}\n\n},{}],14:[function(require,module,exports){\n'use strict';\n\nvar isBrowser = typeof window !== 'undefined';\n\n// FIXME: how to do conditional loading this with ES6 modules?\nmodule.exports = isBrowser ? require('./request.browser') : require('./request.node');\n\n},{\"./request.browser\":13,\"./request.node\":15}],15:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.post = post;\n\nvar _http = require('http');\n\nvar _http2 = _interopRequireDefault(_http);\n\nvar _https = require('https');\n\nvar _https2 = _interopRequireDefault(_https);\n\nvar _url = require('url');\n\nvar _url2 = _interopRequireDefault(_url);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : { default: obj };\n}\n\nvar parseUrl = _url2.default.parse;\n\nfunction post(url, body, timeout) {\n  return new Promise(function (resolve, reject) {\n    var data = body === 'string' ? body : JSON.stringify(body);\n    var urlObj = parseUrl(url);\n\n    // An object of options to indicate where to post to\n    var options = {\n      host: urlObj.hostname,\n      port: urlObj.port,\n      path: urlObj.path,\n      method: 'POST',\n      headers: { 'Content-Length': data.length }\n    };\n\n    if (body !== 'string') {\n      options.headers['Content-Type'] = 'application/json';\n    }\n\n    var proto = urlObj.protocol === 'https:' ? _https2.default : _http2.default;\n\n    var req = proto.request(options, function (res) {\n      res.setEncoding('utf8');\n      var result = '';\n      res.on('data', function (data) {\n        result += data;\n      });\n\n      res.on('end', function () {\n        var contentType = res.headers['content-type'];\n        var isJSON = contentType && contentType.indexOf('json') !== -1;\n\n        try {\n          var body = isJSON ? JSON.parse(result) : result;\n\n          resolve([body, res.statusCode]);\n        } catch (err) {\n          reject(err);\n        }\n      });\n    });\n\n    req.on('error', reject);\n\n    req.on('socket', function (socket) {\n      socket.setTimeout(timeout, function () {\n        req.abort();\n      });\n    });\n\n    req.write(data);\n    req.end();\n  });\n}\n\n},{\"http\":undefined,\"https\":undefined,\"url\":undefined}],16:[function(require,module,exports){\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.compare = compare;\nexports.add = add;\nexports.sum = sum;\nexports.mean = mean;\nexports.std = std;\nexports.variance = variance;\nexports.median = median;\n// basic statistical functions\n\nfunction compare(a, b) {\n  return a > b ? 1 : a < b ? -1 : 0;\n}\n\nfunction add(a, b) {\n  return a + b;\n}\n\nfunction sum(arr) {\n  return arr.reduce(add);\n}\n\nfunction mean(arr) {\n  return sum(arr) / arr.length;\n}\n\nfunction std(arr) {\n  return Math.sqrt(variance(arr));\n}\n\nfunction variance(arr) {\n  if (arr.length < 2) return 0;\n\n  var _mean = mean(arr);\n  return arr.map(function (x) {\n    return Math.pow(x - _mean, 2);\n  }).reduce(add) / (arr.length - 1);\n}\n\nfunction median(arr) {\n  if (arr.length < 2) return arr[0];\n\n  var sorted = arr.slice().sort(compare);\n  if (sorted.length % 2 === 0) {\n    // even\n    return (sorted[arr.length / 2 - 1] + sorted[arr.length / 2]) / 2;\n  } else {\n    // odd\n    return sorted[(arr.length - 1) / 2];\n  }\n}\n\n},{}],17:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.create = create;\n\nvar _util = require('./util.js');\n\nvar util = _interopRequireWildcard(_util);\n\nvar _stat = require('./stat.js');\n\nvar stat = _interopRequireWildcard(_stat);\n\nvar _request = require('./request/request');\n\nvar request = _interopRequireWildcard(_request);\n\nvar _emitter = require('./emitter.js');\n\nvar _emitter2 = _interopRequireDefault(_emitter);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : { default: obj };\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }newObj.default = obj;return newObj;\n  }\n}\n\n/**\n * timesync\n *\n * Time synchronization between peers\n *\n * https://github.com/enmasseio/timesync\n */\n\nvar Promise = require('./Promise');\n\n/**\n * Factory function to create a timesync instance\n * @param {Object} [options]  TODO: describe options\n * @return {Object} Returns a new timesync instance\n */\nfunction create(options) {\n  var timesync = {\n    // configurable options\n    options: {\n      interval: 60 * 60 * 1000, // interval for doing synchronizations in ms. Set to null to disable auto sync\n      timeout: 10000, // timeout for requests to fail in ms\n      delay: 1000, // delay between requests in ms\n      repeat: 5, // number of times to do a request to one peer\n      peers: [], // uri's or id's of the peers\n      server: null, // uri of a single server (master/slave configuration)\n      now: Date.now // function returning the system time\n    },\n\n    /** @type {number} The current offset from system time */\n    offset: 0, // ms\n\n    /** @type {number} Contains the timeout for the next synchronization */\n    _timeout: null,\n\n    /** @type {Object.<string, function>} Contains a map with requests in progress */\n    _inProgress: {},\n\n    /**\n     * @type {boolean}\n     * This property used to immediately apply the first ever received offset.\n     * After that, it's set to false and not used anymore.\n     */\n    _isFirst: true,\n\n    /**\n     * Send a message to a peer\n     * This method must be overridden when using timesync\n     * @param {string} to\n     * @param {*} data\n     */\n    send: function send(to, data, timeout) {\n      return request.post(to, data, timeout).then(function (val) {\n        var res = val[0];\n\n        timesync.receive(to, res);\n      }).catch(function (err) {\n        emitError(err);\n      });\n    },\n\n    /**\n     * Receive method to be called when a reply comes in\n     * @param {string | undefined} [from]\n     * @param {*} data\n     */\n    receive: function receive(from, data) {\n      if (data === undefined) {\n        data = from;\n        from = undefined;\n      }\n\n      if (data && data.id in timesync._inProgress) {\n        // this is a reply\n        timesync._inProgress[data.id](data.result);\n      } else if (data && data.id !== undefined) {\n        // this is a request from an other peer\n        // reply with our current time\n        timesync.send(from, {\n          jsonrpc: '2.0',\n          id: data.id,\n          result: timesync.now()\n        });\n      }\n    },\n\n    _handleRPCSendError: function _handleRPCSendError(id, reject, err) {\n      delete timesync._inProgress[id];\n      reject(new Error('Send failure'));\n    },\n\n    /**\n     * Send a JSON-RPC message and retrieve a response\n     * @param {string} to\n     * @param {string} method\n     * @param {*} [params]\n     * @returns {Promise}\n     */\n    rpc: function rpc(to, method, params) {\n      var id = util.nextId();\n      var resolve, reject;\n      var deferred = new Promise(function (res, rej) {\n        resolve = res;\n        reject = rej;\n      });\n\n      timesync._inProgress[id] = function (data) {\n        delete timesync._inProgress[id];\n\n        resolve(data);\n      };\n\n      var sendResult = void 0;\n\n      try {\n        sendResult = timesync.send(to, {\n          jsonrpc: '2.0',\n          id: id,\n          method: method,\n          params: params\n        }, timesync.options.timeout);\n      } catch (err) {\n        timesync._handleRPCSendError(id, reject, err);\n      }\n\n      if (sendResult && (sendResult instanceof Promise || sendResult.then && sendResult.catch)) {\n        sendResult.catch(timesync._handleRPCSendError.bind(this, id, reject));\n      } else {\n        console.warn('Send should return a promise');\n      }\n\n      return deferred;\n    },\n\n    /**\n     * Synchronize now with all configured peers\n     * Docs: http://www.mine-control.com/zack/timesync/timesync.html\n     */\n    sync: function sync() {\n      timesync.emit('sync', 'start');\n\n      var peers = timesync.options.server ? [timesync.options.server] : timesync.options.peers;\n      return Promise.all(peers.map(function (peer) {\n        return timesync._syncWithPeer(peer);\n      })).then(function (all) {\n        var offsets = all.filter(function (offset) {\n          return timesync._validOffset(offset);\n        });\n        if (offsets.length > 0) {\n          // take the average of all peers (excluding self) as new offset\n          timesync.offset = stat.mean(offsets);\n          timesync.emit('change', timesync.offset);\n        }\n        timesync.emit('sync', 'end');\n      });\n    },\n\n    /**\n     * Test whether given offset is a valid number (not NaN, Infinite, or null)\n     * @param {number} offset\n     * @returns {boolean}\n     * @private\n     */\n    _validOffset: function _validOffset(offset) {\n      return offset !== null && !isNaN(offset) && isFinite(offset);\n    },\n\n    /**\n     * Sync one peer\n     * @param {string} peer\n     * @return {Promise.<number | null>}  Resolves with the offset to this peer,\n     *                                    or null if failed to sync with this peer.\n     * @private\n     */\n    _syncWithPeer: function _syncWithPeer(peer) {\n      // retrieve the offset of a peer, then wait 1 sec\n      var all = [];\n\n      function sync() {\n        return timesync._getOffset(peer).then(function (result) {\n          return all.push(result);\n        });\n      }\n\n      function waitAndSync() {\n        return util.wait(timesync.options.delay).then(sync);\n      }\n\n      function notDone() {\n        return all.length < timesync.options.repeat;\n      }\n\n      return sync().then(function () {\n        return util.whilst(notDone, waitAndSync);\n      }).then(function () {\n        // filter out null results\n        var results = all.filter(function (result) {\n          return result !== null;\n        });\n\n        // calculate the limit for outliers\n        var roundtrips = results.map(function (result) {\n          return result.roundtrip;\n        });\n        var limit = stat.median(roundtrips) + stat.std(roundtrips);\n\n        // filter all results which have a roundtrip smaller than the mean+std\n        var filtered = results.filter(function (result) {\n          return result.roundtrip < limit;\n        });\n        var offsets = filtered.map(function (result) {\n          return result.offset;\n        });\n\n        // return the new offset\n        return offsets.length > 0 ? stat.mean(offsets) : null;\n      });\n    },\n\n    /**\n     * Retrieve the offset from one peer by doing a single call to the peer\n     * @param {string} peer\n     * @returns {Promise.<{roundtrip: number, offset: number} | null>}\n     * @private\n     */\n    _getOffset: function _getOffset(peer) {\n      var start = timesync.options.now(); // local system time\n\n      return timesync.rpc(peer, 'timesync').then(function (timestamp) {\n        var end = timesync.options.now(); // local system time\n        var roundtrip = end - start;\n        var offset = timestamp - end + roundtrip / 2; // offset from local system time\n\n        // apply the first ever retrieved offset immediately.\n        if (timesync._isFirst) {\n          timesync._isFirst = false;\n          timesync.offset = offset;\n          timesync.emit('change', offset);\n        }\n\n        return {\n          roundtrip: roundtrip,\n          offset: offset\n        };\n      }).catch(function (err) {\n        // just ignore failed requests, return null\n        return null;\n      });\n    },\n\n    /**\n     * Get the current time\n     * @returns {number} Returns a timestamp\n     */\n    now: function now() {\n      return timesync.options.now() + timesync.offset;\n    },\n\n    /**\n     * Destroy the timesync instance. Stops automatic synchronization.\n     * If timesync is currently executing a synchronization, this\n     * synchronization will be finished first.\n     */\n    destroy: function destroy() {\n      clearTimeout(timesync._timeout);\n    }\n  };\n\n  // apply provided options\n  if (options) {\n    if (options.server && options.peers) {\n      throw new Error('Configure either option \"peers\" or \"server\", not both.');\n    }\n\n    for (var prop in options) {\n      if (options.hasOwnProperty(prop)) {\n        if (prop === 'peers' && typeof options.peers === 'string') {\n          // split a comma separated string with peers into an array\n          timesync.options.peers = options.peers.split(',').map(function (peer) {\n            return peer.trim();\n          }).filter(function (peer) {\n            return peer !== '';\n          });\n        } else {\n          timesync.options[prop] = options[prop];\n        }\n      }\n    }\n  }\n\n  // turn into an event emitter\n  (0, _emitter2.default)(timesync);\n\n  /**\n   * Emit an error message. If there are no listeners, the error is outputted\n   * to the console.\n   * @param {Error} err\n   */\n  function emitError(err) {\n    if (timesync.list('error').length > 0) {\n      timesync.emit('error', err);\n    } else {\n      console.log('Error', err);\n    }\n  }\n\n  if (timesync.options.interval !== null) {\n    // start an interval to automatically run a synchronization once per interval\n    timesync._timeout = setInterval(timesync.sync, timesync.options.interval);\n\n    // synchronize immediately on the next tick (allows to attach event\n    // handlers before the timesync starts).\n    setTimeout(function () {\n      timesync.sync().catch(function (err) {\n        return emitError(err);\n      });\n    }, 0);\n  }\n\n  return timesync;\n}\n\n},{\"./Promise\":11,\"./emitter.js\":12,\"./request/request\":14,\"./stat.js\":16,\"./util.js\":18}],18:[function(require,module,exports){\n'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.wait = wait;\nexports.repeat = repeat;\nexports.whilst = whilst;\nexports.nextId = nextId;\nvar Promise = require('./Promise');\n\n/**\n * Resolve a promise after a delay\n * @param {number} delay    A delay in milliseconds\n * @returns {Promise} Resolves after given delay\n */\nfunction wait(delay) {\n  return new Promise(function (resolve) {\n    setTimeout(resolve, delay);\n  });\n}\n\n/**\n * Repeat a given asynchronous function a number of times\n * @param {function} fn   A function returning a promise\n * @param {number} times\n * @return {Promise}\n */\nfunction repeat(fn, times) {\n  return new Promise(function (resolve, reject) {\n    var count = 0;\n    var results = [];\n\n    function recurse() {\n      if (count < times) {\n        count++;\n        fn().then(function (result) {\n          results.push(result);\n          recurse();\n        });\n      } else {\n        resolve(results);\n      }\n    }\n\n    recurse();\n  });\n}\n\n/**\n * Repeat an asynchronous callback function whilst\n * @param {function} condition   A function returning true or false\n * @param {function} callback    A callback returning a Promise\n * @returns {Promise}\n */\nfunction whilst(condition, callback) {\n  return new Promise(function (resolve, reject) {\n    function recurse() {\n      if (condition()) {\n        callback().then(function () {\n          return recurse();\n        });\n      } else {\n        resolve();\n      }\n    }\n\n    recurse();\n  });\n}\n\n/**\n * Simple id generator\n * @returns {number} Returns a new id\n */\nfunction nextId() {\n  return _id++;\n}\nvar _id = 0;\n\n},{\"./Promise\":11}]},{},[17])(17)\n});\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n","const floorPrecision = (x, precision) => x - (x < 0 ? precision : 0 + (x % precision))\n\nconst calcs = Object.entries({\n\th: [1000 * 60 * 60, 24],\n\tm: [1000 * 60, 60],\n\ts: [1000, 60],\n\td: [100, 10],\n\tc: [10, 10],\n}).reduce((accum, [name, [divider, modulo]]) => {\n\taccum[name] = {divider, modulo}\n\treturn accum\n}, {})\n\nconst smallest = (time, format) => {\n\tconst small = Object.keys(calcs).reduce((accum, key) => {\n\t\tconst index = format.search(new RegExp(key))\n\t\treturn index >= 0 ? format[index] : accum\n\t}, format)\n\tconst div = calcs[small]\n\treturn floorPrecision(time, div.divider)\n}\n\nconst formatDigits = (pTime, pFormat) => {\n\tconst numDigits = pFormat.length\n\tconst {divider, modulo} = calcs[pFormat.charAt(0)]\n\treturn ('0000' + Math.floor((pTime / divider) % modulo)).slice(-numDigits)\n}\n\nconst formatTime = (time, format) => (\n\t(time < 0 ? '-' : '') + Object.keys(calcs).reduce((accum, key) => (\n\t\taccum.replace(\n\t\t\tnew RegExp(`${key}+`, 'g'),\n\t\t\t(...args) => {\n\t\t\t\treturn formatDigits(Math.abs(smallest(time, format)), args[0])\n\t\t\t}\n\t\t)\n\t), format)\n  \n)\n\nmodule.exports = formatTime\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","import SyncWatch from '@dimitriaatos/syncwatch'\nimport ReconnectingWebSocket from 'reconnectingwebsocket'\nimport * as timeSync from 'timesync/dist/timesync'\nimport EventEmitter from 'events'\n\nconst sync = (syncWatch, options = {}) => {\n\tconst {syncPath, delay, interval, stopAfter} = Object.assign(options, {syncPath: '/sync', delay: 1000, interval: 5000, stopAfter: 10000})\n\tconst ts = timeSync.create({\n\t\tserver: syncPath,\n\t\tdelay,\n\t\tinterval\n\t})\n\t\n\tsyncWatch.offset = ts.now() - Date.now()\n\tsetTimeout(() => {\n\t\tts.destroy()\n\t}, stopAfter)\n\t\n\tts.on('change', () => {\n\t\tsyncWatch.offset = ts.now() - Date.now()\n\t})\n}\n\nconst clientWatchWebSocket = (syncWatch, options = {}) => {\n\tconst events = new EventEmitter()\n\n\tconst {reconnectAttemptInterval, url} = Object.assign(options, {\n\t\treconnectAttemptInterval: 2000,\n\t\turl: `ws://${window.location.host}`\n\t})\n\t\n\tconst maxSocket = new ReconnectingWebSocket(url)\n\t\n\tmaxSocket.timeoutInterval = reconnectAttemptInterval\n\t\n\tmaxSocket.onopen = () => {\n\t\tevents.emit('connection')\n\t}\n\t\n\tmaxSocket.onmessage = (event) => {\n\t\tsyncWatch.update(JSON.parse(event.data))\n\t}\n\t\n\tmaxSocket.onclose = () => {\n\t\tevents.emit('disconnection')\n\t}\n\t\n\twindow.onbeforeunload = () => {\n\t\tmaxSocket.onclose()\n\t\tmaxSocket.close()\n\t}\n\n\treturn events\n}\n\nconst ClientWatch = class extends SyncWatch {\n\tconstructor(cb, options){\n\t\tsuper(cb, options)\n\t\t\n\t\tsync(this, options)\n\t\tconst events = clientWatchWebSocket(this, options)\n\t\tthis.on = events.on.bind(events)\n\t}\n}\n\nexport default ClientWatch","import SyncWatch from './clientWatch'\n\nexport default SyncWatch"],"sourceRoot":""}